# API Documentation for Frontend Engineers

## Base URL
The API server runs on `http://localhost:3030`

## Development Setup

### Prerequisites
- Node.js
- npm

### Installation & Running
```bash
# Install dependencies
npm install

# Start development server
npm run dev

# Build for production
npm run build

# Start production server
npm start
```

### Dependencies
- **polyservice**: Framework for creating API services
- **polyexpress**: Express-like middleware for polyservice
- **TypeScript**: Development language

### Configuration
The server uses a `config.json` file for configuration settings:

```json
{
  "server": {
    "port": 3030,
    "host": "localhost"
  },
  "database": {
    "interventions_path": "db/interventions.json", 
    "symptoms_path": "db/symptoms.json"
  }
}
```

You can modify these settings to customize:
- Server port and host
- Database file paths
- CORS configuration

## Data Structures

### Intervention Object
```typescript
interface Intervention {
  id: number;                    // Unique identifier
  name: string;                  // Intervention name (e.g., "cough drops")
  description: string;           // Detailed description of the intervention
  severity: string[];            // Array of severity levels: ["mild", "moderate", "severe"]
  product_link: string;          // URL to product page (can be empty string)
  product_image: string;         // URL to product image (can be empty string)
  likes: number;                 // Number of likes/positive ratings
  dislikes: number;              // Number of dislikes/negative ratings
  SOS?: boolean;                 // Optional: true for emergency/urgent interventions
}
```

### Symptom Object
```typescript
interface Symptom {
  id: number;                    // Unique identifier
  name: string;                  // Symptom name (e.g., "coughing")
  description: string;           // Detailed description of the symptom
  interventions: number[];       // Array of intervention IDs that treat this symptom
}
```

## API Endpoints

### Interventions

#### Get All Interventions
```
GET /interventions/getAll
```
**Response:** Array of Intervention objects

#### Get Intervention by ID
```
GET /interventions/getById/:id
```
**Parameters:** 
- `id` (number) - Intervention ID

**Response:** Single Intervention object or 404 if not found

#### Create New Intervention
```
POST /interventions/create
```
**Request Body:**
```json
{
  "name": "string",
  "description": "string",
  "severity": ["mild", "moderate", "severe"],
  "product_link": "string",
  "product_image": "string", 
  "likes": 0,
  "dislikes": 0,
  "SOS": false  // Optional field
}
```
**Response:** Created Intervention object with auto-generated ID

#### Update Intervention
```
PUT /interventions/update/:id
```
**Parameters:**
- `id` (number) - Intervention ID

**Request Body:** Same as create (all fields required, SOS optional)

**Response:** Updated Intervention object or 404 if not found

#### Delete Intervention
```
DELETE /interventions/delete/:id
```
**Parameters:**
- `id` (number) - Intervention ID

**Response:** Deleted Intervention object or 404 if not found

### Symptoms

#### Get All Symptoms
```
GET /symptoms/getAll
```
**Response:** Array of Symptom objects

#### Get Symptom by ID
```
GET /symptoms/getById/:id
```
**Parameters:**
- `id` (number) - Symptom ID

**Response:** Single Symptom object or 404 if not found

#### Create New Symptom
```
POST /symptoms/create
```
**Request Body:**
```json
{
  "name": "string",
  "description": "string",
  "interventions": [1, 2, 3]
}
```
**Response:** Created Symptom object with auto-generated ID

#### Update Symptom
```
PUT /symptoms/update
```
**Request Body:**
```json
{
  "id": 1,
  "name": "string", 
  "description": "string",
  "interventions": [1, 2, 3]
}
```
**Response:** Updated Symptom object or 404 if not found

#### Delete Symptom
```
DELETE /symptoms/delete/:id
```
**Parameters:**
- `id` (number) - Symptom ID

**Response:** Deleted Symptom object or 404 if not found

## Error Responses

All endpoints return appropriate HTTP status codes:
- `200` - Success
- `201` - Created
- `404` - Resource not found
- `500` - Server error

Error responses include a message field:
```json
{
  "code": 404,
  "message": "Intervention not found"
}
```

## Usage Notes

- All IDs are auto-generated by the server
- The `severity` field accepts an array with any combination of: "mild", "moderate", "severe"
- The `interventions` field in symptoms contains references to intervention IDs
- Some interventions have `SOS: true` indicating they are for urgent/emergency situations
- Empty strings are valid for `product_link` and `product_image` fields
- The API uses JSON for request and response bodies
- **CORS**: The server accepts requests from any origin for development purposes
